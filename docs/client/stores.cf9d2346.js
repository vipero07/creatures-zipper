function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e,n){t.$$.on_destroy.push(function(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}(e,n))}function u(t,e,n,r){if(t){const o=a(t,e,n,r);return t[0](o)}}function a(t,n,r,o){return t[1]&&o?e(r.ctx.slice(),t[1](o(n))):r.ctx}function f(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if("object"==typeof e.dirty){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}function l(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function $(){return p("")}function y(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function b(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t){return Array.from(t.childNodes)}function w(t,e,n,r){for(let r=0;r<t.length;r+=1){const o=t[r];if(o.nodeName===e){for(let t=0;t<o.attributes.length;t+=1){const e=o.attributes[t];n[e.name]||o.removeAttribute(e.name)}return t.splice(r,1)[0]}}return r?function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}(e):h(e)}function x(t,e){for(let n=0;n<t.length;n+=1){const r=t[n];if(3===r.nodeType)return r.data=""+e,t.splice(n,1)[0]}return p(e)}function _(t){return x(t," ")}function N(t,e){e=""+e,t.data!==e&&(t.data=e)}function E(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}}function k(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function M(t,e,n){t.classList[n?"add":"remove"](e)}let z;function A(t){z=t}function C(){if(!z)throw new Error("Function called outside component initialization");return z}function j(t){C().$$.after_update.push(t)}function F(){const t=C();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}function O(t,e){C().$$.context.set(t,e)}const B=[],D=[],I=[],L=[],q=Promise.resolve();let G=!1;function P(t){I.push(t)}function T(){const t=new Set;do{for(;B.length;){const t=B.shift();A(t),J(t.$$)}for(;D.length;)D.pop()();for(let e=0;e<I.length;e+=1){const n=I[e];t.has(n)||(n(),t.add(n))}I.length=0}while(B.length);for(;L.length;)L.pop()();G=!1}function J(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const W=new Set;let Z;function H(){Z={r:0,c:[],p:Z}}function K(){Z.r||o(Z.c),Z=Z.p}function Q(t,e){t&&t.i&&(W.delete(t),t.i(e))}function R(t,e,n,r){if(t&&t.o){if(W.has(t))return;W.add(t),Z.c.push(()=>{W.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function U(t,e){t.d(1),e.delete(t.key)}function V(t,e){R(t,1,1,()=>{e.delete(t.key)})}function X(t,e,n,r,o,s,c,i,u,a,f,l){let d=t.length,g=s.length,h=d;const p={};for(;h--;)p[t[h].key]=h;const m=[],$=new Map,y=new Map;for(h=g;h--;){const t=l(o,s,h),i=n(t);let u=c.get(i);u?r&&u.p(t,e):(u=a(i,t),u.c()),$.set(i,m[h]=u),i in p&&y.set(i,Math.abs(h-p[i]))}const b=new Set,S=new Set;function v(t){Q(t,1),t.m(i,f),c.set(t.key,t),f=t.first,g--}for(;d&&g;){const e=m[g-1],n=t[d-1],r=e.key,o=n.key;e===n?(f=e.first,d--,g--):$.has(o)?!c.has(r)||b.has(r)?v(e):S.has(o)?d--:y.get(r)>y.get(o)?(S.add(r),v(e)):(b.add(o),d--):(u(n,c),d--)}for(;d--;){const e=t[d];$.has(e.key)||u(e,c)}for(;g;)v(m[g-1]);return m}function Y(t,e){const n={},r={},o={$$scope:1};let s=t.length;for(;s--;){const c=t[s],i=e[s];if(i){for(const t in c)t in i||(r[t]=1);for(const t in i)o[t]||(n[t]=i[t],o[t]=1);t[s]=i}else for(const t in c)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function tt(t){return"object"==typeof t&&null!==t?t:{}}function et(t){t&&t.c()}function nt(t,e){t&&t.l(e)}function rt(t,e,r){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,r),P(()=>{const e=i.map(n).filter(s);u?u.push(...e):o(e),t.$$.on_mount=[]}),a.forEach(P)}function ot(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){-1===t.$$.dirty[0]&&(B.push(t),G||(G=!0,q.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,n,s,c,i,u,a=[-1]){const f=z;A(e);const l=n.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:a};let g=!1;d.ctx=s?s(e,l,(t,n,r=n)=>(d.ctx&&i(d.ctx[t],d.ctx[t]=r)&&(d.bound[t]&&d.bound[t](r),g&&st(e,t)),n)):[],d.update(),g=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(v(n.target)):d.fragment&&d.fragment.c(),n.intro&&Q(e.$$.fragment),rt(e,n.target,n.anchor),T()),A(f)}class it{$destroy(){ot(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const ut=[];function at(e,n=t){let r;const o=[];function s(t){if(c(e,t)&&(e=t,r)){const t=!ut.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),ut.push(n,e)}if(t){for(let t=0;t<ut.length;t+=2)ut[t][0](ut[t+1]);ut.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,i=t){const u=[c,i];return o.push(u),1===o.length&&(r=n(s)||t),c(e),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}const ft={agent:"My Agents",agents:"My Agents",c16:"Images",s16:"Images",catalogue:"Catalogue",mng:"Sounds",wav:"Sounds",gen:"Genetics",gno:"Genetics"},lt={...ft,game:"Creatures 3",cos:"Bootstrap/001 World"},dt={...ft,game:"Docking Station",cos:"Bootstrap/010 Docking Station"};function gt(t,e){return t.get(e)||t.set(e,new Map).get(e)}function ht({game:t,folder:e,fileName:n}){return`${t}/${e}/${n}`}function pt(t,e){return e.slice(e.lastIndexOf(t)+1)}class mt{constructor(){this.fileStructure=new Map,this.zipStructure=new Map}getFileMap({game:t,folder:e,fileName:n}){const r=gt(this.fileStructure,t),o=gt(r,e);return gt(o,n)}add({game:t,file:e,originalPath:n,locations:r,originName:o}){const s=pt("/",n),c=r[pt(".",s)];if(!c)return this.fileStructure;const i=this.getFileMap({game:t,folder:c,fileName:s});return[...i].forEach(([t,e])=>{i.set(t,{...e,selected:!1})}),i.set(o||s,{selected:!0,file:e,fileName:s,game:t,folder:c}),this.zipStructure.set(ht({game:t,folder:c,fileName:s}),e),this.fileStructure}select([t,{game:e,folder:n,fileName:r}]){const o=this.getFileMap({game:e,folder:n,fileName:r});return[...o].forEach(([s,c])=>{const i=t===s;o.set(s,{...c,selected:i}),i&&this.zipStructure.set(ht({game:e,folder:n,fileName:r}),c.file)}),this.fileStructure}remove([t,{game:e,folder:n,fileName:r}]){const o=gt(this.fileStructure,e),s=gt(o,n);return s.delete(r),s.size||o.delete(n),o.size||this.fileStructure.delete(e),this.zipStructure.delete(ht({game:e,folder:n,fileName:r})),this.fileStructure}build(t="base64"){const e=new JSZip;return[...this.zipStructure].forEach(([t,n])=>{e.file(t,n)}),e.generateAsync({type:t})}}const $t=at("Creatures 3"),yt=at(lt);const bt=function(){let t=new mt;const{subscribe:e,set:n}=at(t.fileStructure);return{subscribe:e,add:e=>n(t.add(e)),select:e=>n(t.select(e)),remove:e=>n(t.remove(e)),build:()=>t.build(),reset:()=>{t=new mt,n(t.fileStructure)}}}();export{R as A,ot as B,u as C,a as D,f as E,$ as F,e as G,Y as H,tt as I,O as J,H as K,K as L,at as M,b as N,o as O,F as P,P as Q,E as R,it as S,X as T,U,j as V,bt as W,k as X,V as Y,pt as Z,v as a,x as b,w as c,g as d,h as e,S as f,M as g,d as h,ct as i,l as j,N as k,y as l,i as m,t as n,$t as o,yt as p,lt as q,dt as r,c as s,p as t,et as u,m as v,nt as w,_ as x,rt as y,Q as z};
